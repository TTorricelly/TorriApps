-- ============================================================================
-- PLANO DE CONTAS PARA SALÃO DE BELEZA (Chart of Accounts for Beauty Salon)
-- ============================================================================
-- 
-- This script creates a complete chart of accounts following Brazilian 
-- accounting standards for a beauty salon business.
--
-- POS-enabled accounts are marked with allow_pos_in = TRUE
-- These accounts can receive payments from POS systems
--
-- After running these INSERT statements, rebuild the closure table with:
-- POST /api/v1/accounts/rebuild-closure
--
-- ============================================================================
set search_path to miria_maison;
-- ============================================================================
-- 1. ATIVO (ASSETS) - Normal Balance: DEBIT
-- ============================================================================

-- 1.1 ATIVO CIRCULANTE (Current Assets)
INSERT INTO accounts (id, code, name, parent_id, kind, normal_balance, subtype, allow_pos_in, currency, is_leaf, is_active) VALUES
('11000000-0000-0000-0000-000000000000', '1', 'ATIVO', NULL, 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('11100000-0000-0000-0000-000000000000', '1.1', 'ATIVO CIRCULANTE', '11000000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 1.1.1 DISPONÍVEL (Cash & Equivalents) - POS ENABLED
('11110000-0000-0000-0000-000000000000', '1.1.1', 'DISPONÍVEL', '11100000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('11110001-0000-0000-0000-000000000000', '1.1.1.001', 'Caixa Geral', '11110000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'CASH_DRAWER', TRUE, 'BRL', TRUE, TRUE),
('11110002-0000-0000-0000-000000000000', '1.1.1.002', 'Banco Bradesco CC', '11110000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'BANK', TRUE, 'BRL', TRUE, TRUE),
('11110003-0000-0000-0000-000000000000', '1.1.1.003', 'Banco Itaú CC', '11110000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'BANK', TRUE, 'BRL', TRUE, TRUE),
('11110004-0000-0000-0000-000000000000', '1.1.1.004', 'PIX Recebimentos', '11110000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'BANK', TRUE, 'BRL', TRUE, TRUE),

-- 1.1.2 CARTÕES E PAGAMENTOS (Cards & Payments) - POS ENABLED
('11120000-0000-0000-0000-000000000000', '1.1.2', 'CARTÕES E PAGAMENTOS', '11100000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('11120001-0000-0000-0000-000000000000', '1.1.2.001', 'Cartão Débito a Receber', '11120000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'CARD_CLEARING', TRUE, 'BRL', TRUE, TRUE),
('11120002-0000-0000-0000-000000000000', '1.1.2.002', 'Cartão Crédito a Receber', '11120000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'CARD_CLEARING', TRUE, 'BRL', TRUE, TRUE),
('11120003-0000-0000-0000-000000000000', '1.1.2.003', 'Maquininha Stone', '11120000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'CARD_CLEARING', TRUE, 'BRL', TRUE, TRUE),
('11120004-0000-0000-0000-000000000000', '1.1.2.004', 'Maquininha Mercado Pago', '11120000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'CARD_CLEARING', TRUE, 'BRL', TRUE, TRUE),
('11120005-0000-0000-0000-000000000000', '1.1.2.005', 'Maquininha PagSeguro', '11120000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'CARD_CLEARING', TRUE, 'BRL', TRUE, TRUE),

-- 1.1.3 CONTAS A RECEBER (Accounts Receivable)
('11130000-0000-0000-0000-000000000000', '1.1.3', 'CONTAS A RECEBER', '11100000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('11130001-0000-0000-0000-000000000000', '1.1.3.001', 'Clientes a Receber', '11130000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('11130002-0000-0000-0000-000000000000', '1.1.3.002', 'Cartão Fidelidade', '11130000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 1.1.4 ESTOQUE (Inventory)
('11140000-0000-0000-0000-000000000000', '1.1.4', 'ESTOQUE', '11100000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('11140001-0000-0000-0000-000000000000', '1.1.4.001', 'Produtos para Revenda', '11140000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('11140002-0000-0000-0000-000000000000', '1.1.4.002', 'Material de Consumo', '11140000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 1.2 ATIVO NÃO CIRCULANTE (Non-Current Assets)
('11200000-0000-0000-0000-000000000000', '1.2', 'ATIVO NÃO CIRCULANTE', '11000000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 1.2.1 IMOBILIZADO (Fixed Assets)
('11210000-0000-0000-0000-000000000000', '1.2.1', 'IMOBILIZADO', '11200000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('11210001-0000-0000-0000-000000000000', '1.2.1.001', 'Móveis e Utensílios', '11210000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('11210002-0000-0000-0000-000000000000', '1.2.1.002', 'Equipamentos de Beleza', '11210000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('11210003-0000-0000-0000-000000000000', '1.2.1.003', 'Equipamentos de Informática', '11210000-0000-0000-0000-000000000000', 'ASSET', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE);

-- ============================================================================
-- 2. PASSIVO (LIABILITIES) - Normal Balance: CREDIT
-- ============================================================================

-- 2.1 PASSIVO CIRCULANTE (Current Liabilities)
INSERT INTO accounts (id, code, name, parent_id, kind, normal_balance, subtype, allow_pos_in, currency, is_leaf, is_active) VALUES
('22000000-0000-0000-0000-000000000000', '2', 'PASSIVO', NULL, 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('22100000-0000-0000-0000-000000000000', '2.1', 'PASSIVO CIRCULANTE', '22000000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 2.1.1 FORNECEDORES (Suppliers)
('22110000-0000-0000-0000-000000000000', '2.1.1', 'FORNECEDORES', '22100000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('22110001-0000-0000-0000-000000000000', '2.1.1.001', 'Fornecedores de Produtos', '22110000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('22110002-0000-0000-0000-000000000000', '2.1.1.002', 'Fornecedores de Equipamentos', '22110000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 2.1.2 OBRIGAÇÕES TRABALHISTAS (Labor Obligations)
('22120000-0000-0000-0000-000000000000', '2.1.2', 'OBRIGAÇÕES TRABALHISTAS', '22100000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('22120001-0000-0000-0000-000000000000', '2.1.2.001', 'Salários a Pagar', '22120000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('22120002-0000-0000-0000-000000000000', '2.1.2.002', 'FGTS a Recolher', '22120000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('22120003-0000-0000-0000-000000000000', '2.1.2.003', 'INSS a Recolher', '22120000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 2.1.3 OBRIGAÇÕES FISCAIS (Tax Obligations)
('22130000-0000-0000-0000-000000000000', '2.1.3', 'OBRIGAÇÕES FISCAIS', '22100000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('22130001-0000-0000-0000-000000000000', '2.1.3.001', 'Simples Nacional a Recolher', '22130000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('22130002-0000-0000-0000-000000000000', '2.1.3.002', 'ICMS a Recolher', '22130000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('22130003-0000-0000-0000-000000000000', '2.1.3.003', 'ISS a Recolher', '22130000-0000-0000-0000-000000000000', 'LIABILITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE);

-- ============================================================================
-- 3. PATRIMÔNIO LÍQUIDO (EQUITY) - Normal Balance: CREDIT
-- ============================================================================

INSERT INTO accounts (id, code, name, parent_id, kind, normal_balance, subtype, allow_pos_in, currency, is_leaf, is_active) VALUES
('33000000-0000-0000-0000-000000000000', '3', 'PATRIMÔNIO LÍQUIDO', NULL, 'EQUITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 3.1 CAPITAL SOCIAL (Share Capital)
('33100000-0000-0000-0000-000000000000', '3.1', 'CAPITAL SOCIAL', '33000000-0000-0000-0000-000000000000', 'EQUITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('33110001-0000-0000-0000-000000000000', '3.1.1.001', 'Capital Social Integralizado', '33100000-0000-0000-0000-000000000000', 'EQUITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 3.2 RESERVAS (Reserves)
('33200000-0000-0000-0000-000000000000', '3.2', 'RESERVAS', '33000000-0000-0000-0000-000000000000', 'EQUITY', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('33210001-0000-0000-0000-000000000000', '3.2.1.001', 'Reserva de Lucros', '33200000-0000-0000-0000-000000000000', 'EQUITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('33220001-0000-0000-0000-000000000000', '3.2.2.001', 'Lucros Acumulados', '33200000-0000-0000-0000-000000000000', 'EQUITY', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE);

-- ============================================================================
-- 4. RECEITAS (REVENUE) - Normal Balance: CREDIT
-- ============================================================================

INSERT INTO accounts (id, code, name, parent_id, kind, normal_balance, subtype, allow_pos_in, currency, is_leaf, is_active) VALUES
('44000000-0000-0000-0000-000000000000', '4', 'RECEITAS', NULL, 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 4.1 RECEITA OPERACIONAL (Operating Revenue)
('44100000-0000-0000-0000-000000000000', '4.1', 'RECEITA OPERACIONAL', '44000000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 4.1.1 SERVIÇOS (Services)
('44110000-0000-0000-0000-000000000000', '4.1.1', 'SERVIÇOS', '44100000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('44110001-0000-0000-0000-000000000000', '4.1.1.001', 'Corte de Cabelo', '44110000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44110002-0000-0000-0000-000000000000', '4.1.1.002', 'Escova e Penteado', '44110000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44110003-0000-0000-0000-000000000000', '4.1.1.003', 'Coloração', '44110000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44110004-0000-0000-0000-000000000000', '4.1.1.004', 'Tratamentos Capilares', '44110000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44110005-0000-0000-0000-000000000000', '4.1.1.005', 'Manicure e Pedicure', '44110000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44110006-0000-0000-0000-000000000000', '4.1.1.006', 'Sobrancelha e Cílios', '44110000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44110007-0000-0000-0000-000000000000', '4.1.1.007', 'Maquiagem', '44110000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 4.1.2 PRODUTOS (Product Sales)
('44120000-0000-0000-0000-000000000000', '4.1.2', 'PRODUTOS', '44100000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('44120001-0000-0000-0000-000000000000', '4.1.2.001', 'Venda de Shampoos', '44120000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44120002-0000-0000-0000-000000000000', '4.1.2.002', 'Venda de Condicionadores', '44120000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44120003-0000-0000-0000-000000000000', '4.1.2.003', 'Venda de Cremes', '44120000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('44120004-0000-0000-0000-000000000000', '4.1.2.004', 'Venda de Acessórios', '44120000-0000-0000-0000-000000000000', 'REVENUE', 'CREDIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE);

-- ============================================================================
-- 5. DESPESAS (EXPENSES) - Normal Balance: DEBIT
-- ============================================================================

INSERT INTO accounts (id, code, name, parent_id, kind, normal_balance, subtype, allow_pos_in, currency, is_leaf, is_active) VALUES
('55000000-0000-0000-0000-000000000000', '5', 'DESPESAS', NULL, 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 5.1 CUSTO DOS SERVIÇOS (Cost of Services)
('55100000-0000-0000-0000-000000000000', '5.1', 'CUSTO DOS SERVIÇOS', '55000000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('55110001-0000-0000-0000-000000000000', '5.1.1.001', 'Produtos Utilizados nos Serviços', '55100000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55120001-0000-0000-0000-000000000000', '5.1.2.001', 'Material de Consumo', '55100000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 5.2 DESPESAS OPERACIONAIS (Operating Expenses)
('55200000-0000-0000-0000-000000000000', '5.2', 'DESPESAS OPERACIONAIS', '55000000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),

-- 5.2.1 PESSOAL (Personnel)
('55210000-0000-0000-0000-000000000000', '5.2.1', 'PESSOAL', '55200000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('55210001-0000-0000-0000-000000000000', '5.2.1.001', 'Salários', '55210000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55210002-0000-0000-0000-000000000000', '5.2.1.002', 'Comissões', '55210000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55210003-0000-0000-0000-000000000000', '5.2.1.003', 'FGTS', '55210000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55210004-0000-0000-0000-000000000000', '5.2.1.004', 'INSS', '55210000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 5.2.2 ADMINISTRATIVAS (Administrative)
('55220000-0000-0000-0000-000000000000', '5.2.2', 'ADMINISTRATIVAS', '55200000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('55220001-0000-0000-0000-000000000000', '5.2.2.001', 'Aluguel', '55220000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55220002-0000-0000-0000-000000000000', '5.2.2.002', 'Energia Elétrica', '55220000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55220003-0000-0000-0000-000000000000', '5.2.2.003', 'Água', '55220000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55220004-0000-0000-0000-000000000000', '5.2.2.004', 'Telefone/Internet', '55220000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55220005-0000-0000-0000-000000000000', '5.2.2.005', 'Material de Limpeza', '55220000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55220006-0000-0000-0000-000000000000', '5.2.2.006', 'Marketing e Publicidade', '55220000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),

-- 5.2.3 FINANCEIRAS (Financial)
('55230000-0000-0000-0000-000000000000', '5.2.3', 'FINANCEIRAS', '55200000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', FALSE, TRUE),
('55230001-0000-0000-0000-000000000000', '5.2.3.001', 'Tarifas Bancárias', '55230000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55230002-0000-0000-0000-000000000000', '5.2.3.002', 'Tarifas de Cartão', '55230000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE),
('55230003-0000-0000-0000-000000000000', '5.2.3.003', 'Juros Pagos', '55230000-0000-0000-0000-000000000000', 'EXPENSE', 'DEBIT', 'OTHER', FALSE, 'BRL', TRUE, TRUE);

-- ============================================================================
-- COMPLETION MESSAGE
-- ============================================================================

-- SELECT 'Chart of Accounts created successfully!' as message;
-- SELECT 'Total accounts created: ' || COUNT(*) as total FROM accounts;
-- SELECT 'POS-enabled accounts: ' || COUNT(*) as pos_accounts FROM accounts WHERE allow_pos_in = TRUE;

-- ============================================================================
-- NEXT STEPS:
-- ============================================================================
-- 
-- 1. Run this SQL file to insert all accounts
-- 2. Rebuild the closure table with API call:
--    POST /api/v1/accounts/rebuild-closure
-- 3. Test POS-enabled accounts:
--    GET /api/v1/accounts/pos-enabled
-- 4. Test tree structure:
--    GET /api/v1/accounts/tree
--
-- ============================================================================